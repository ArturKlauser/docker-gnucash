# Docker GnuCash

This repository contains a Dockerfile to run GnuCash (from Alpine Linux stable) in a container with a web-based GUI, accessible via HTTPS.

Based on [jlesage/docker-baseimage-gui](https://github.com/jlesage/docker-baseimage-gui).

## Features

*   **Versions**: Runs GnuCash 5.13 on baseimage-gui:alpine-3.23-v4.
*   **Web Interface**: Access the GnuCash GUI through your web browser.
*   **Secure Access**: Web interface is forced to HTTPS.
*   **Multi-Arch**: Supports `linux/amd64` and `linux/arm64`.
*   **Persistence**: Configuration and data are persisted to volumes.

## Usage

### Docker Compose

1.  Clone this repository.
2.  Create the data directories:
    ```bash
    mkdir -p config data
    ```
3.  Run the container:
    ```bash
    docker-compose up -d
    ```
4.  Access the interface at `https://localhost:5800`.
    *   Note: Since a self-signed certificate is generated by default, you will see a security warning in your browser. You can accept the risk to proceed.

### Docker CLI

```bash
docker run -d \
    --name=gnucash \
    -p 5800:5800 \
    -v $(pwd)/config:/config:rw \
    -v $(pwd)/data:/data:rw \
    -e SECURE_CONNECTION=1 \
    arturklauser/gnucash:baseimage-gui-alpine-3.23-v4-gnucash-5.13
```

## Security

*   **HTTPS**: The container is configured with `SECURE_CONNECTION=1`, which enforces HTTPS for the web interface.
*   **VNC**: The raw VNC port (5900) is **not** exposed to the host to prevent unencrypted access. Access is intended solely through the secure web proxy on port 5800.

## Configuration

### Environment Variables

| Variable | Description | Default |
| :--- | :--- | :--- |
| `SECURE_CONNECTION` | Set to `1` to enable HTTPS. | `1` |
| `USER_ID` | User ID of the user running the application. | `1000` |
| `GROUP_ID` | Group ID of the user running the application. | `1000` |
| `TZ` | Timezone (e.g., `America/New_York`). | `America/Los_Angeles` |
| `APP_NAME` | Name of the application. | `GnuCash` |

### Volumes

| Volume | Description |
| :--- | :--- |
| `/config` | Stores application configuration, including generated SSL certificates. |
| `/data` | Stores GnuCash data files. |

## Build

To build the image locally:

```bash
docker build -t docker-gnucash .
```
