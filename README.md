# <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/1/18/GnuCash_logo.svg/500px-GnuCash_logo.svg.png" width="64" align="absbottom" alt="GnuCash Logo"> Docker container for GnuCash

[![Release][release-badge]][release-link]
[![Build Status][build-badge]][build-link]
[![Docker Image Size][size-badge]][size-link]

[release-badge]: https://img.shields.io/github/v/release/arturklauser/docker-gnucash?logo=github&style=for-the-badge
[release-link]: https://github.com/arturklauser/docker-gnucash/releases/latest
[build-badge]: https://img.shields.io/github/actions/workflow/status/arturklauser/docker-gnucash/ci.yml?branch=main&style=for-the-badge
[build-link]: https://github.com/arturklauser/docker-gnucash/actions/workflows/ci.yml
[size-badge]: https://img.shields.io/docker/image-size/arturklauser/gnucash/latest?style=for-the-badge
[size-link]: https://hub.docker.com/repository/docker/arturklauser/gnucash/

This project provides a Docker container for
<a href="https://www.gnucash.org/">GnuCash</a>.

The graphical user interface (GUI) of the application can be accessed through a
modern web browser, requiring no installation or configuration on the client
side. Only secure access via HTTPS is supported.

The docker image is based on
[jlesage/docker-baseimage-gui](https://github.com/jlesage/docker-baseimage-gui).

> [!NOTE]
> This Docker container is entirely unofficial and not made by the creators of
> GnuCash.

## Features

*   **Versions**: Runs GnuCash 5.14 on baseimage-gui:ubuntu-24.04-v4.10.7.
*   **Web Interface**: Access the GnuCash GUI through your web browser.
*   **Secure Access**: Web interface is forced to HTTPS.
*   **Multi-Arch**: Supports `linux/amd64` and `linux/arm64`.
*   **Persistence**: Configuration and data are persisted to volumes.

## Usage

### Docker Compose

1.  Clone this repository:
    ```bash
    git clone https://github.com/ArturKlauser/docker-gnucash.git
    cd docker-gnucash
    ```
1.  Create the data directories:
    ```bash
    mkdir config data
    ```
1.  Run the container:
    ```bash
    USER_ID=$(id -u) GROUP_ID=$(id -g) docker compose up -d
    ```
1.  Access the interface at [https://localhost:5800](https://localhost:5800).
    *  Note: Since a self-signed certificate is generated by default, you will
       see a security warning in your browser. To avoid this, install your own
       certificate in `/config/certs`.
1.  Shut down the container:<br>
    The container is designed to keep running. But if you want to shut it down,
    remember to first quit GnuCash in the GUI to release the lock on the data
    file. Then run:
    ```bash
    USER_ID=$(id -u) GROUP_ID=$(id -g) docker down
    ```

### Docker CLI

```bash
# For DockerHub released image:
IMAGE=arturklauser/gnucash:v1.0.0

# For locally built image:
IMAGE=gnucash

docker run -d \
    --name=gnucash \
    -p 5800:5800 \
    -v $(pwd)/config:/config:rw \
    -v $(pwd)/data:/data:rw \
    -e USER_ID=$(id -u) \
    -e GROUP_ID=$(id -g) \
    "${IMAGE}"
```

## Security

*   **HTTPS**: The container enforces HTTPS for the web interface. Accesses to
    the regular HTTP port are redirected to HTTPS.
*   **VNC**: The raw VNC port (5900) from `docker-baseimage-gui` is **not**
    exposed to the host to prevent unencrypted access. Access is intended solely
    through the secure web proxy on port 5800.

## Configuration

### Environment Variables used by Docker Compose

| Variable | Description | Default |
| :--- | :--- | :--- |
| `USER_ID` | User ID of the user running the application. | unset - must be set on command line|
| `GROUP_ID` | Group ID of the user running the application. | unset - must be set on command line|
| `TZ` | Timezone (e.g., `America/New_York`). | `America/Los_Angeles` |
| `CONFIG_DIR` | Host path for the application configuration directory. | `./config` |
| `DATA_DIR` | Host path for the GnuCash data files directory. | `./data` |

### Volumes

| Volume | Description |
| :--- | :--- |
| `/data` | Stores GnuCash data files. |
| `/config` | Stores application configuration, including generated SSL certificates (in `/config/certs`). |

> [!TIP]
> <details>
> <summary>How to copy existing GnuCash data and config from host machine to container.</summary>
>
> If you want to continue working with GnuCash data that you were using on your
> host, there are several files you need to copy to the container volumes:
> * **data**: Every "book", i.e., set of accounts, stores its main data in a
>   `*.gnucash` file. This is the file that you explicitly "open" in the GnuCash
>   app. Copy that file into the container's `/data` directory.
>   * Alternatively, you can have stored the book data in a
>     sqlite/mysql/postgres database. In that case, you can export it on the
>     host system ("File -> Save As") as `*.gnucash` file for import into the
>     container.
> * **config**: The `*.gnucash` file above contains the main "book" data, such as
>   accounts names and their transactions. Additional information, however, like
>   UI settings or saved reports, is stored in separate configuration files.
>   Those should be copied to the container's `/config` directory. Depending on
>   the type of host system, you'll find those files in different locations:
>   * Linux host:
>     * Configuration location: `$XDG_DATA_HOME/gnucash`. You'll find
>       directories `books`, `checks`, `translog`, and file `accelerator-map`.
>       In `books` there will be a `*.gcm` file for each data file, e.g., for a
>       `.../foobar.gnucash` data file there is a corresponding
>       `.../books/foobar.gnucash.gcm` file. If the environment variable
>       `$XDG_DATA_HOME` is not defined on your host, it usually defaults to
>       `~/.local/share`. Copy the whole `$XDG_DATA_HOME/gnucash` directory to
>       the container's `/config/xdg/data/gnucash` directory.
>     * More settings: `$XDG_CONFIG_HOME/dconf/user`. This is a `dconf` database
>       file that contains settings like window geometries, autosave settings,
>       tip-of-the-day settings, Alphavantage API key, etc. If the environment
>       variable `$XDG_CONFIG_HOME` is not defined on your host, it usually
>       defaults to `~/.config`.  Copy this file to the container's
>       `/config/xdg/config/dconf/user` file.
>
>       If you want to see what's in the file, you can decode it with `dconf
>       dump /org/gnucash/` for all GnuCash related settings, or `dconf read
>       /org/gnucash/GnuCash/dialogs/tip-of-the-day/show-at-startup` to get a
>       specific value. Note that `dconf` is not installed in the
>       `docker-gnucash` image.
>
>   * MacOS host:
>     * Configuration location: Open the GnuCash app and select "Gnucash -> About
>       Gnucash". The info box that pops up shows `GNC_USERDATA_DIR` and
>       `GNC_USERCONFIG_DIR`. Typically both point to `~/Library/Application
>       Support/GnuCash`.
>
>       In there, you'll find directories `books`, `checks`, and `config`, file
>       `accelerator-map`, and `saved-reports*` if you have any. In `books`
>       there will be a `*.gcm` file for each data file. Copy this whole
>       `GNC_USERDATA_DIR` directory to the container's
>       `/config/xdg/data/gnucash` directory.
>     * More settings: `~/Library/Preferences/org.gnucash.GnuCash.plist`. This
>       file contains settings similar to `$XDG_CONFIG_HOME/dconf/user` on
>       Linux.  Unfortunately there is no easy way to import them automatically
>       to the Linux GnuCash container. But you can look at them with `defaults
>       read org.gnucash.GnuCash` to find out which settings you have changed
>       and change the corresponding settings manually in the GnuCash container
>       UI's "GnuCash -> Settings" menu.
> </details>

> [!TIP]
> <details>
> <summary>How to use an existing SSL certificate (e.g., from Let's Encrypt).</summary>
>
> By default, the container generates a self-signed certificate, which typically
> causes web browsers to issue a warning. To use a trusted certificate, such as
> one from [Let's Encrypt](https://letsencrypt.org/), you need to place your
> certificate files in the `/config/certs` directory.
>
> The container expects the following files:
> *   `/config/certs/web-fullchain.pem`: The full chain certificate.
> *   `/config/certs/web-privkey.pem`: The private key.
>
> For example, if you are using Let's Encrypt, you would copy your
> `fullchain.cer` and `mydomain.com.key` to these locations.
>
> 1.  Stop the container.
> 2.  Copy and rename your certificate files to the `certs` subdirectory of your
>     mapped config directory (e.g., `./config/certs`):
>     ```bash
>     cp /path/to/your/fullchain.cer ./config/certs/web-fullchain.pem
>     cp /path/to/your/mydomain.com.key ./config/certs/web-privkey.pem
>     ```
> 3.  Start the container.
>
> **Note:** Let's Encrypt certificates are valid only for real domain names, not
> for `localhost` or IP addresses. To avoid browser warnings, you must access
> the container using the domain name specified in the certificate, not via
> `https://localhost:5800`. If you access the container via a reverse proxy,
> you need to install a valid front-end certificate (which the browser checks)
> in the reverse proxy itself. Depending on the configuration of the reverse
> proxy, e.g., `proxy_ssl_verify` for nginx, it might or might not care if the
> backend (container) certificate is self-signed.
> </details>

## Local Image Build

To build the image locally:
```bash
docker build \
    --build-arg BASEIMAGE_VERSION=ubuntu-24.04-v4.10.7 \
    --build-arg GNUCASH_VERSION=5.14 \
    -t gnucash .
```

To run the locally built image:
```bash
USER_ID=$(id -u) GROUP_ID=$(id -g) IMAGE=gnucash docker compose up -d
```
### Build Arguments

| Argument | Description | Default |
| :--- | :--- | :--- |
| `BASEIMAGE_VERSION` | Version of `docker-baseimage-gui` to start with. | unset - must be set on command line |
| `GNUCASH_VERSION` | Version of `gnucash` package to install. | unset - must be set on command line |
| `WITH_DOCS` | Set to `false` to build the image without GnuCash documentation. | `true` |
| `WITH_FQUOTE` | Set to `false` to build the image without Finance::Quote support. | `true` |

Note, however, that at the time of writing (Jan 2026), this only saves ~90 MB
(~8%) of docker image size. The majority of the image size of ~1.1 GB is the
`gnucash` package itself and its dependencies. Also, on some Ubuntu versions,
`gnucash` has a hard dependency on `libfinance-quote-perl`, so disabling
`WITH_FQUOTE` might not actually remove the package.
